(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n(2),c=n(0),s=n.n(c),i=n(92),o=n.n(i),l=n(21),u=n(12),j=n.n(u),b=n(205),d=n(102),h=n(208),O=n(202),m=n(13),f=n(36),x=n(97),p=n(58),v=n(16),g=n(19),k=n(204),I=n(199),y=n(198),w=n(200),S=n(206),N=n(201),P=n(9),C=n.n(P),F=n(22),T=n(31),D=n.n(T),L=n(65),E=n(38),R=n(191),U=n(207),q=n(210),G=n(197),A=n(32),_=A.b().shape({other:A.c().max(50)}),B=s.a.createContext(),V=function(){var e,t=Object(f.c)((function(e){return e.user})),n=Object(v.f)(),s=Object(c.useContext)(B),i=s.userId,o=s.email,l=s.setFoodList,u=s.foodList,j=s.setFoodPref,b=s.foodPref;Object(c.useEffect)((function(){function e(){return(e=Object(F.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("/food");case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var d=Object(c.useState)(!1),h=Object(m.a)(d,2),O=(h[0],h[1]),x=Object(c.useState)(""),p=Object(m.a)(x,2),k=(p[0],p[1]),I=Object(c.useState)(""),y=Object(m.a)(I,2),w=y[0],S=y[1],N=Object(c.useState)(b),P=Object(m.a)(N,2),T=P[0],A=P[1],V=Object(E.useForm)({resolver:Object(L.yupResolver)(_),defaultValues:{foods:b}}),W=V.register,J=V.handleSubmit,$=V.watch,z=V.errors,M=V.control,H=(V.setValue,$("other")),K=function(){var e=Object(F.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.foods.length||"false"!==t.other){e.next=5;break}return S("\u05d9\u05e9 \u05dc\u05d1\u05d7\u05d5\u05e8 \u05dc\u05e4\u05d7\u05d5\u05ea \u05d4\u05e2\u05d3\u05e4\u05ea \u05d0\u05d5\u05db\u05dc \u05d0\u05d7\u05ea"),e.abrupt("return",!1);case 5:if("true"!==t.other){e.next=19;break}if(""!==t.otherText){e.next=11;break}return S("\u05d0\u05dd \u05e9\u05d3\u05d4 \u05d0\u05d7\u05e8 \u05de\u05e1\u05d5\u05de\u05df, \u05d9\u05e9 \u05dc\u05de\u05dc\u05d0 \u05e2\u05e8\u05da"),e.abrupt("return",!1);case 11:if(!u.some((function(e){return e.name===t.otherText}))){e.next=16;break}return S("\u05de\u05d0\u05db\u05dc \u05d6\u05d4 \u05db\u05d1\u05e8 \u05e7\u05d9\u05d9\u05dd \u05d1\u05e8\u05e9\u05d9\u05de\u05d4, \u05d0\u05e0\u05d0 \u05e1\u05de\u05df \u05d0\u05d5\u05ea\u05d5 \u05d5\u05de\u05d7\u05e7 \u05d0\u05ea \u05d0\u05d5\u05e4\u05e6\u05d9\u05d9\u05ea \u05d0\u05d7\u05e8"),e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 17:e.next=20;break;case 19:return e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(F.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("true"!==t.other){e.next=7;break}return e.next=3,D.a.post("/food",{other:t.otherText});case 3:return n=e.sent,e.abrupt("return",[].concat(Object(r.a)(t.foods),[{name:t.otherText,value:n.data.id}]));case 7:return e.abrupt("return",t.foods);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(F.a)(C.a.mark((function e(r){var a,c,s,l,u,b;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(""),console.log("FavFoodData",r),0!==Object.keys(z).length&&null!=z||(O("true"===r.other),k("string"===typeof r.otherText?r.otherText:""),j(r.foods)),e.next=5,K(r);case 5:if(!e.sent){e.next=44;break}if(i){e.next=27;break}return e.prev=8,e.next=11,D.a.post("/user",Object(g.a)(Object(g.a)({},t),{},{email:o}));case 11:return a=e.sent,c=a.data.userId,e.next=15,Q(r);case 15:return s=e.sent,e.next=18,D.a.post("/foodPref",{userId:c,foodPref:s});case 18:S("\u05de\u05e9\u05ea\u05de\u05e9 \u05e0\u05d5\u05e6\u05e8"),n.push("/home"),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(8),S("\u05d0\u05d7\u05d3 \u05de\u05d4\u05e9\u05d3\u05d5\u05ea \u05d7\u05e1\u05e8!");case 25:e.next=44;break;case 27:return e.prev=27,e.next=30,D.a.put("/user",Object(g.a)(Object(g.a)({},t),{},{email:o}));case 30:return l=e.sent,u=l.data.userId,e.next=34,Q(r);case 34:return b=e.sent,e.next=37,D.a.put("/foodPref",{userId:u,foodPref:b});case 37:S("\u05de\u05e9\u05ea\u05de\u05e9 \u05e2\u05d5\u05d3\u05db\u05df"),n.push("/home"),e.next=44;break;case 41:e.prev=41,e.t1=e.catch(27),S("\u05d0\u05d7\u05d3 \u05de\u05d4\u05e9\u05d3\u05d5\u05ea \u05d7\u05e1\u05e8!");case 44:case"end":return e.stop()}}),e,null,[[8,22],[27,41]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:J(X),id:"favFood",children:[u.map((function(e){return Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(E.Controller,{control:M,name:"foods",render:function(t){return Object(a.jsx)(U.a,{name:e.name,value:e.value,checked:T.some((function(t){return t.name===e.name})),color:"primary",onChange:function(){return t.onChange(function(e){if(T.some((function(t){return t.name===e.name}))){var t=T.filter((function(t){return t.name!==e.name}));return A(t),t}var n=[].concat(Object(r.a)(T),[{name:e.name,value:e.value}]);return A(n),n}({name:e.name,value:e.value}))}})}}),Object(a.jsx)("label",{children:e.name})]})})),Object(a.jsxs)(R.a,{container:!0,spacing:4,children:[Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(E.Controller,{control:M,name:"other",render:function(e){return Object(a.jsx)(U.a,{name:"other",id:"other",onChange:function(t){return e.onChange(t.target.checked)},checked:e.value})}}),Object(a.jsx)("label",{children:"\u05d0\u05d7\u05e8"})]}),H&&Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(q.a,{name:"otherText",label:"\u05d0\u05d5\u05db\u05dc \u05d0\u05d7\u05e8",InputLabelProps:{shrink:!0},inputRef:W,id:"otherText",variant:"outlined"}),Object(a.jsx)("p",{children:null===(e=z.other)||void 0===e?void 0:e.message})]})]}),Object(a.jsx)(R.a,{container:!0,spacing:4,children:Object(a.jsx)(R.a,{item:!0,xs:3,children:Object(a.jsx)(G.a,{variant:"contained",type:"submit",form:"favFood",children:"\u05e1\u05d9\u05d5\u05dd"})})}),""!==w&&Object(a.jsx)("p",{children:w})]})})},W=n(77),J=n.n(W),$=n(196),z=n(212),M=n(203),H=n(213),K=Object(y.a)((function(e){return{logo:{maxWidth:80},root:{flexGrow:1},formField:{direction:"rtl",marginLeft:e.spacing(1),marginRight:e.spacing(1),width:225},menuItem:{direction:"rtl",width:225},legend:{textAlign:"left"}}})),Q=function(e){var t=String(e).trim();if(t.length>9)return!1;if(t.length<9)for(;t.length<9;)t="0"+t;for(var n,r=0,a=0;a<t.length;a++)r+=(n=Number(t[a])*(a%2+1))>9?n-9:n;return r%10===0},X=/^[a-z\u0590-\u05fe]+$/i,Y=A.b().shape({name:A.c().matches(X,"Name is not valid").max(50).required(),lastName:A.c().matches(X,"Last Name is not valid").max(50).required(),birthDate:A.a().max(new Date).required(),beer:A.c(),idNum:A.c().test("israeliId","ID is not valid",(function(e){return Q(e)})).required(),phone:A.c().matches(/^\+?(972|0)(\-)?0?(([23489]{1}\d{7})|[5]{1}\d{8})$/,"Phone number is not valid").required()}),Z=["APA","Ale","Lager"],ee=function(){var e,t,n,r,s,i,o=Object(f.c)((function(e){return e.user})),l=Object(f.b)(),u=K(),j=Object(c.useContext)(B),b=j.userId,d=j.setFoodPref,h=j.setTab;Object(c.useEffect)((function(){I(o)}),[]),Object(c.useEffect)((function(){function e(){return(e=Object(F.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("/foodPref",{params:{userId:b}});case 2:t=e.sent,d(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}b&&function(){e.apply(this,arguments)}()}),[b]);var O=Object(E.useForm)({resolver:Object(L.yupResolver)(Y)}),m=O.register,x=O.handleSubmit,p=O.watch,v=O.errors,k=O.control,I=(O.setValue,O.reset),y=p("birthDate"),w=J()().subtract(18,"years");return Object(a.jsx)("div",{className:u.root,dir:"rtl",children:Object(a.jsxs)("form",{onSubmit:x((function(e){console.log("PersonalInfoData:",e),0===Object.keys(v).length&&(l({type:"UPDATE_USER",user:Object(g.a)({},e)}),h(1))})),id:"personalInfo",children:[Object(a.jsxs)(R.a,{container:!0,spacing:4,children:[Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(q.a,{className:u.formField,name:"name",error:Boolean(v.name),label:"\u05e9\u05dd \u05e4\u05e8\u05d8\u05d9",InputLabelProps:{shrink:!0},inputRef:m,id:"name",variant:"outlined"}),Object(a.jsx)("p",{children:null===(e=v.name)||void 0===e?void 0:e.message})]}),Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(q.a,{className:u.formField,name:"lastName",label:"\u05e9\u05dd \u05de\u05e9\u05e4\u05d7\u05d4",InputLabelProps:{shrink:!0},inputRef:m,required:!0,id:"lastName",variant:"outlined"}),Object(a.jsx)("p",{children:null===(t=v.lastName)||void 0===t?void 0:t.message})]})]}),Object(a.jsxs)(R.a,{container:!0,spacing:4,children:[Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(E.Controller,{name:"birthDate",control:k,render:function(e){return Object(a.jsx)(q.a,{className:u.formField,name:"birthDate",id:"birthDate",label:"\u05ea\u05d0\u05e8\u05d9\u05da \u05dc\u05d9\u05d3\u05d4",type:"date",variant:"outlined",InputLabelProps:{shrink:!0},onChange:function(t){return e.onChange(t)},value:e.value})}}),Object(a.jsx)("p",{children:null===(n=v.birthDate)||void 0===n?void 0:n.message})]}),J()(y).isBefore(w)&&Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(E.Controller,{name:"beer",control:k,render:function(e){return Object(a.jsxs)($.a,{variant:"outlined",children:[Object(a.jsx)(z.a,{id:"beer-label",children:"\u05de\u05d4 \u05d4\u05d1\u05d9\u05e8\u05d4 \u05d4\u05d0\u05d4\u05d5\u05d1\u05d4 \u05e2\u05dc\u05d9\u05d9\u05da?"}),Object(a.jsx)(M.a,{className:u.formField,id:"beer",name:"beer",onChange:function(t){return e.onChange(t)},value:e.value,label:"\u05de\u05d4 \u05d4\u05d1\u05d9\u05e8\u05d4 \u05d4\u05d0\u05d4\u05d5\u05d1\u05d4 \u05e2\u05dc\u05d9\u05d9\u05da?",autoWidth:!0,children:Z.map((function(e){return Object(a.jsx)(H.a,{className:u.menuItem,value:e,children:e})}))})]})}}),Object(a.jsx)("p",{children:null===(r=v.beer)||void 0===r?void 0:r.message})]})]}),Object(a.jsx)(R.a,{container:!0,spacing:4,children:Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(q.a,{className:u.formField,name:"idNum",label:"\u05ea.\u05d6",InputLabelProps:{shrink:!0},required:!0,id:"idNum",variant:"outlined",inputRef:m}),Object(a.jsx)("p",{children:null===(s=v.idNum)||void 0===s?void 0:s.message})]})}),Object(a.jsx)(R.a,{container:!0,spacing:4,children:Object(a.jsxs)(R.a,{item:!0,xs:3,children:[Object(a.jsx)(q.a,{className:u.formField,name:"phone",label:"\u05d8\u05dc\u05e4\u05d5\u05df",InputLabelProps:{shrink:!0},required:!0,id:"phone",variant:"outlined",inputRef:m}),Object(a.jsx)("p",{children:null===(i=v.phone)||void 0===i?void 0:i.message})]})}),Object(a.jsx)(R.a,{container:!0,spacing:4,children:Object(a.jsx)(R.a,{item:!0,xs:3,children:Object(a.jsx)(G.a,{variant:"contained",type:"submit",form:"personalInfo",children:"\u05d4\u05de\u05e9\u05da"})})})]})})};function te(e){var t=e.children,n=e.value,r=e.index;return Object(a.jsx)("div",{role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),children:n===r&&Object(a.jsx)(k.a,{p:3,children:Object(a.jsx)(I.a,{children:t})})})}function ne(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var re=Object(y.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper}}})),ae=function(){var e=re(),t=Object(c.useContext)(B),n=t.tab,r=t.setTab;return Object(a.jsxs)("div",{className:e.root,children:[Object(a.jsx)(w.a,{position:"static",children:Object(a.jsxs)(S.a,{value:n,onChange:function(e,t){r(t)},"aria-label":"simple tabs example",children:[Object(a.jsx)(N.a,Object(g.a)({label:"\u05e4\u05e8\u05d8\u05d9\u05dd \u05d0\u05d9\u05e9\u05d9\u05d9\u05dd"},ne(0))),Object(a.jsx)(N.a,Object(g.a)(Object(g.a)({label:"\u05de\u05d0\u05db\u05dc\u05d9\u05dd \u05d0\u05d4\u05d5\u05d1\u05d9\u05dd"},ne(1)),{},{disabled:!0}))]})}),Object(a.jsx)(te,{value:n,index:0,children:Object(a.jsx)(ee,{})}),Object(a.jsx)(te,{value:n,index:1,children:Object(a.jsx)(V,{})})]})},ce=n(71),se=Object(y.a)((function(e){return{logo:{maxWidth:80},root:{flexGrow:1}}})),ie=function(){var e=se(),t=Object(c.useContext)(B),n=t.user,r=t.setUser,s=Object(v.f)(),i=Object(v.g)();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(w.a,{position:"static",color:"secondary",children:Object(a.jsxs)(R.a,{justify:"space-between",container:!0,alignItems:"center",children:[Object(a.jsx)(R.a,{item:!0,children:Object(a.jsxs)(k.a,{display:"flex",flexDirection:"row",alignItems:"center",padding:1,children:[Object(a.jsx)("img",{src:"\\logo.png",alt:"u ate it logo",className:e.logo}),Object(a.jsx)(I.a,{variant:"h6",children:"\u05d0\u05db\u05dc\u05ea \u05d0\u05d5\u05ea\u05d4"})]})}),"/"!==i.pathname&&Object(a.jsx)(R.a,{item:!0,children:Object(a.jsxs)(k.a,{display:"flex",flexDirection:"row",alignItems:"center",padding:1,children:[Object(a.jsxs)(I.a,{color:"inherit",variant:"h6",children:["\u05e9\u05dc\u05d5\u05dd \u05dc\u05da ",n]}),Object(a.jsx)(ce.GoogleLogout,{clientId:"988769699236-iia7fttlj2p46hoaisu04lh81cnd10co.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:function(){r(""),s.push("/")}})]})})]})})})},oe=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(ie,{}),Object(a.jsx)(ae,{})]})},le=Object(y.a)((function(e){return{container:{alignContent:"center"}}})),ue=function(){le();var e=Object(f.b)(),t=Object(v.f)(),n=Object(c.useContext)(B),r=n.setUser,s=n.setEmail,i=n.setUserId,o=n.setTab,l=function(){var n=Object(F.a)(C.a.mark((function n(){var r;return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,D.a.get("/user",{params:{email:localStorage.getItem("email")}});case 2:200===(r=n.sent).status&&("newUser"===r.data.userId?(o(0),t.push("/home")):(e({type:"GET_USER",user:Object(g.a)({},r.data.userData)}),i(r.data.userData.id),o(0),t.push("/home")));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[Object(a.jsx)(ie,{}),Object(a.jsx)(R.a,{container:!0,spacing:3,children:Object(a.jsxs)(R.a,{item:!0,xs:6,children:[Object(a.jsx)(I.a,{variant:"h5",children:"\u05d1\u05e8\u05d5\u05db\u05d9\u05dd \u05d4\u05d1\u05d0\u05d9\u05dd \u05dc\u05d0\u05db\u05dc\u05ea \u05d0\u05d5\u05ea\u05d4! \u05d1\u05d5\u05d0\u05d5 \u05e0\u05ea\u05d7\u05d1\u05e8 \u05d5\u05de\u05d9\u05d3 \u05e0\u05ea\u05d7\u05d9\u05dc..."}),Object(a.jsx)(ce.GoogleLogin,{clientId:"988769699236-iia7fttlj2p46hoaisu04lh81cnd10co.apps.googleusercontent.com",buttonText:"Login",onSuccess:function(e){"profileObj"in e&&(r(e.profileObj.name),s(e.profileObj.email),localStorage.setItem("user",e.profileObj.name),localStorage.setItem("email",e.profileObj.email),l())},onFailure:function(e){console.log(e)},cookiePolicy:"single_host_origin",responseType:"code,token"})]})})]})},je=function(){return Object(a.jsx)(p.a,{children:Object(a.jsx)("div",{children:Object(a.jsxs)(v.c,{children:[Object(a.jsx)(v.a,{path:"/",component:ue,exact:!0}),Object(a.jsx)(v.a,{path:"/home",component:oe})]})})})},be=n(39),de=n(101),he=n.n(de),Oe=n(78),me={user:{name:"",lastName:"",birthDate:new Date("2014-08-18T21:11:54"),beer:"",idNum:"",phone:""}},fe={key:"root",storage:he.a},xe=Object(Oe.a)(fe,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return Object(g.a)(Object(g.a)({},e),{},{user:t.user});case"UPDATE_USER":return Object(g.a)(Object(g.a)({},e),{},{user:Object(g.a)(Object(g.a)({},e.user),t.user)});default:return e}})),pe=Object(be.c)(xe),ve=Object(Oe.b)(pe),ge=function(){var e=Object(c.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(),i=Object(m.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(""),j=Object(m.a)(u,2),b=j[0],d=j[1],h=Object(c.useState)(0),O=Object(m.a)(h,2),p=O[0],v=O[1],g=Object(c.useState)([]),k=Object(m.a)(g,2),I=k[0],y=k[1],w=Object(c.useState)([]),S=Object(m.a)(w,2),N=S[0],P=S[1],C=Object(c.useState)(!1),F=Object(m.a)(C,2),T=F[0],D=F[1],L={user:n,setUser:r,userId:o,setUserId:l,email:b,setEmail:d,tab:p,setTab:v,foodList:I,setFoodList:y,foodPref:N,setFoodPref:P,formError:T,setFormError:D};return Object(c.useEffect)((function(){var e=localStorage.getItem("user"),t=localStorage.getItem("email");e&&t&&(r(e),d(t))}),[]),Object(a.jsx)(B.Provider,{value:L,children:Object(a.jsx)(f.a,{store:pe,children:Object(a.jsx)(x.a,{loading:null,persistor:ve,children:Object(a.jsx)(je,{})})})})},ke=Object(l.b)({plugins:[].concat(Object(r.a)(Object(b.a)().plugins),[o()()])}),Ie=Object(d.a)({direction:"rtl"});j.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(h.b,{jss:ke,children:Object(a.jsx)(O.a,{theme:Ie,children:Object(a.jsx)(ge,{})})})}),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.0d077a3d.chunk.js.map